<html>
	<head>
		<!-- Links to Bootstrap CSS framwork -->
		 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
 		 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
 		 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"crossorigin="anonymous"></script>
 		 <link rel = "stylesheet" href = "../style.css">
		<title> Kohls </title>
	<head>
	<body>
		<nav class="navbar navbar-inverse">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="#"><img class = "logo" src = "../img/kohlslogo.png"></a>
		    </div>

		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav navbar-right">
		        <li><a href="#">Analytics</a></li>
		       	<li><a href="#">Purchase</a></li>
		      </ul>
		    </div><!-- /.navbar-collapse -->
		  </div><!-- /.container-fluid -->
		</nav>
	</body>
	<div class = "col-sm-12">
		<h1> Buy a Product </h1>
		<form>
		  <div class="form-group">
		    <label for="exampleSelect1">Gender</label>
		    <select class="form-control" id="genderselect">
		      <option>Male</option>
		      <option>Female</option>
		      <option>Other</option>
		    </select>
		  </div>
		  <div class="form-group">
		    <label for="exampleSelect1">Continent</label>
		    <select class="form-control" id="continentselect">
		      <option>NorthAmerica</option>
		      <option>SouthAmerican</option>
		      <option>Europe</option>
		      <option>Asia</option>
		      <option>Africa</option>
		      <option>Australia</option>
		      <option>Antarctica</option>
		    </select>
		  </div>
		  <div class="form-group">
		    <label for="exampleSelect1">Age</label>
		    <select class="form-control" id="ageselect">
		      <option>UnderThirteen</option>
		      <option>ThirteenToEighteen</option>
		      <option>EighteenToFifty</option>
		      <option>ThirtyToFifty</option>
		      <option>FiftyAndOlder</option>
		    </select>
		  </div>
		  <div class="form-group">
		    <label for="example-number-input" class="col-2 col-form-label">Purchases: </label>
		      <input class="form-control" type="number" value="42" id="purchases">
		  </div>
			<!--
			pub struct BuyPost {
			    time: u64,
			    continent: String,
			    gender: String,
			    age: String
			}
		-->

			<script>

				console.log("initializing script");
				function submitPurchase() {
					console.log("submitting purchase");
					var gender = document.getElementById("genderselect").value;
					var continent = document.getElementById("continentselect").value;
					var age = document.getElementById("ageselect").value;
					console.log(gender);
					console.log(continent);
					console.log(age);
					var time = Math.round((new Date()).getTime() / 1000);
					var struct = {
						"time": time,
						"continent": continent,
						"gender": gender,
						"age": age
					};
					var ser = JSON.stringify(struct);
					console.log(ser);
					/*
					var xhr = new XMLHttpRequest();
					xhr.open("POST", "/purchase", true);
					xhr.setRequestHeader("Content-Type", "application/json");
					xhr.send(ser);
					*/

					fetch("/buy", {
						method: "POST",
						body: ser
					}).then(res => {
						console.log("request complete!");
						console.log(res);
					});

				}
			</script>
		  <button type="button" class="btn btn-primary" onclick="submitPurchase()">Submit</button>
		</form>
	</div>
</html>
